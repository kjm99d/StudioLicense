<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studio License Admin</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Materialize CSS & Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!-- Override Materialize CSS modal styles for our custom modals -->
        <style>
            /* Materialize CSS Î™®Îã¨ Ïä§ÌÉÄÏùº ÏôÑÏ†ÑÌûà Ïû¨Ï†ïÏùò */
            .modal.studio-modal { 
                position: fixed !important; 
                top: 0 !important; 
                left: 0 !important; 
                right: 0 !important;
                bottom: 0 !important;
                width: 100% !important; 
                height: 100% !important; 
                background: rgba(0, 0, 0, 0.5) !important;
                z-index: 14000 !important; 
                display: flex !important; 
                align-items: center !important; 
                justify-content: center !important; 
                opacity: 0 !important; 
                visibility: hidden !important; 
                pointer-events: none !important; 
                transition: opacity .2s ease !important;
                max-height: none !important;
                overflow: visible !important;
                border: none !important;
                outline: none !important;
                box-shadow: none !important;
            }
            .modal.studio-modal.active { 
                opacity: 1 !important; 
                visibility: visible !important; 
                pointer-events: auto !important; 
            }
            .modal.studio-modal .modal-content { 
                background: #fff !important; 
                border-radius: 12px !important; 
                max-width: 600px !important; 
                width: 90% !important; 
                max-height: 90vh !important; 
                overflow-y: auto !important; 
                transform: translateY(-8px) scale(.98) !important; 
                opacity: .98 !important; 
                transition: transform .2s ease, opacity .2s ease, box-shadow .2s ease !important; 
                box-shadow: 0 1px 3px rgba(0,0,0,.1) !important; 
                z-index: 14001 !important;
                position: relative !important;
                border: none !important;
                outline: none !important;
                padding: 0 !important;
            }
            .modal.studio-modal.active .modal-content { 
                transform: translateY(0) scale(1) !important; 
                opacity: 1 !important; 
                box-shadow: 0 10px 15px rgba(0,0,0,.1) !important; 
            }
            .modal.studio-modal .modal-header { 
                display: flex !important; 
                justify-content: space-between !important; 
                align-items: center !important; 
                padding: 1.5rem !important; 
                border-bottom: 1px solid #e5e7eb !important; 
            }
            .modal.studio-modal .modal-body {
                padding: 1.5rem !important;
            }
            .modal.studio-modal .modal-footer { 
                display: flex !important; 
                justify-content: flex-end !important; 
                gap: .5rem !important; 
                padding: 1rem 1.5rem !important; 
                border-top: 1px solid #e5e7eb !important; 
            }
            /* Î™®Îã¨ Îã´Í∏∞ Î≤ÑÌäº Ïä§ÌÉÄÏùº */
            .modal.studio-modal .modal-close {
                background: none !important;
                border: none !important;
                padding: 0.25rem !important;
                cursor: pointer !important;
                color: #6b7280 !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                border-radius: 4px !important;
                transition: all 0.2s ease !important;
                width: 32px !important;
                height: 32px !important;
                min-width: unset !important;
                box-shadow: none !important;
                text-transform: none !important;
                line-height: 1 !important;
                margin: 0 !important;
            }
            .modal.studio-modal .modal-close:hover {
                background: #f3f4f6 !important;
                color: #111827 !important;
            }
            .modal.studio-modal .modal-close:focus {
                outline: 2px solid #3b82f6 !important;
                outline-offset: 2px !important;
            }
            /* Î™®Îã¨ Ìë∏ÌÑ∞ Î≤ÑÌäº Ïä§ÌÉÄÏùº Ïû¨Ï†ïÏùò */
            .modal.studio-modal .modal-footer button {
                display: inline-flex !important;
                align-items: center !important;
                justify-content: center !important;
                padding: 0.5rem 1.5rem !important;
                border-radius: 6px !important;
                font-size: 1rem !important;
                font-weight: 500 !important;
                cursor: pointer !important;
                transition: all 0.2s ease !important;
                text-transform: none !important;
                line-height: 1.5 !important;
                white-space: nowrap !important;
                min-width: 80px !important;
                height: auto !important;
                border: 1px solid transparent !important;
                box-shadow: none !important;
                letter-spacing: normal !important;
                vertical-align: middle !important;
            }
            .modal.studio-modal .modal-footer .btn {
                display: inline-flex !important;
                align-items: center !important;
                justify-content: center !important;
                padding: 0.5rem 1.5rem !important;
                margin: 0 !important;
            }
            .modal.studio-modal .modal-footer .btn.grey,
            .modal.studio-modal .modal-footer .btn.grey.darken-1 {
                background-color: #757575 !important;
                color: #fff !important;
                border: none !important;
            }
            .modal.studio-modal .modal-footer .btn.grey:hover,
            .modal.studio-modal .modal-footer .btn.grey.darken-1:hover {
                background-color: #616161 !important;
                box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
            }
            .modal.studio-modal .modal-footer .btn.blue {
                background-color: #2196F3 !important;
                color: #fff !important;
                border: none !important;
            }
            .modal.studio-modal .modal-footer .btn.blue:hover {
                background-color: #1976D2 !important;
                box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
            }
            .modal.studio-modal .modal-footer .btn.green {
                background-color: #4CAF50 !important;
                color: #fff !important;
                border: none !important;
            }
            .modal.studio-modal .modal-footer .btn.green:hover {
                background-color: #388E3C !important;
                box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
            }
            /* MaterializeÏùò modal-overlay Ï†úÍ±∞ */
            .modal-overlay {
                display: none !important;
            }
            /* Materialize Î≤ÑÌäºÏùò Î™®Îì† Í∏∞Î≥∏ Ïä§ÌÉÄÏùº Î¨¥Î†•Ìôî */
            .modal.studio-modal button.btn,
            .modal.studio-modal button.btn-large,
            .modal.studio-modal button.btn-small,
            .modal.studio-modal button.btn-flat {
                text-decoration: none !important;
                color: #fff !important;
                text-align: center !important;
                letter-spacing: normal !important;
                transition: background-color 0.2s ease !important;
                cursor: pointer !important;
                border: none !important;
                border-radius: 6px !important;
                display: inline-flex !important;
                align-items: center !important;
                justify-content: center !important;
                height: auto !important;
                line-height: 1.5 !important;
                padding: 0.5rem 1.5rem !important;
                text-transform: none !important;
                vertical-align: middle !important;
                -webkit-tap-highlight-color: transparent !important;
                box-shadow: none !important;
                outline: 0 !important;
                min-width: 80px !important;
            }
        </style>
</head>
<body>
    <!-- Î°úÍ∑∏Ïù∏ ÌéòÏù¥ÏßÄ -->
    <div id="login-page" class="page active">
        <div class="login-container">
            <div class="login-box">
                <h1>üîê Studio License</h1>
                <p class="subtitle">Í¥ÄÎ¶¨Ïûê Î°úÍ∑∏Ïù∏</p>
                <form id="login-form" onsubmit="handleLoginForm(event)">
                    <div class="form-group">
                        <label for="username">ÏïÑÏù¥Îîî</label>
                        <input type="text" id="username" name="username" required placeholder="admin">
                    </div>
                    <div class="form-group">
                        <label for="password">ÎπÑÎ∞ÄÎ≤àÌò∏</label>
                        <input type="password" id="password" name="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>
                    <button type="submit" class="btn blue" style="width:100%">Î°úÍ∑∏Ïù∏</button>
                    <div id="login-error" class="error-message"></div>
                </form>
            </div>
        </div>
    </div>

    <!-- ÎåÄÏãúÎ≥¥Îìú -->
    <div id="dashboard-page" class="page">
        <nav class="app-nav">
            <div class="nav-brand">üé´ Studio License</div>
            <div class="nav-menu">
                <a href="#" data-page="dashboard" class="nav-link active">ÎåÄÏãúÎ≥¥Îìú</a>
                <a href="#" data-page="licenses" class="nav-link">ÎùºÏù¥ÏÑ†Ïä§</a>
                <a href="#" data-page="products" class="nav-link">Ï†úÌíà</a>
                <a href="#" data-page="policies" class="nav-link">Ï†ïÏ±Ö</a>
                <a href="#" data-page="admins" class="nav-link" id="admins-tab" style="display:none;">Í¥ÄÎ¶¨Ïûê</a>
                <a href="#" data-page="swagger" class="nav-link">API Î¨∏ÏÑú</a>
            </div>
            <div class="nav-user">
                <div class="user-badge">
                    <svg class="user-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                    </svg>
                    <span id="user-name">Admin</span>
                </div>
                <button id="change-password-btn" class="btn btn-sm">ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω</button>
                <button id="logout-btn" class="btn btn-sm">Î°úÍ∑∏ÏïÑÏõÉ</button>
            </div>
        </nav>

        <div class="container">
            <!-- ÎåÄÏãúÎ≥¥Îìú Ïª®ÌÖêÏ∏† -->
            <div id="dashboard-content" class="content active">
                <h2>üìä ÎåÄÏãúÎ≥¥Îìú</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìã</div>
                        <div class="stat-info">
                            <div class="stat-value" id="total-licenses">-</div>
                            <div class="stat-label">Ï¥ù ÎùºÏù¥ÏÑ†Ïä§</div>
                        </div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-info">
                            <div class="stat-value" id="active-licenses">-</div>
                            <div class="stat-label">ÌôúÏÑ± ÎùºÏù¥ÏÑ†Ïä§</div>
                        </div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-icon">‚è∞</div>
                        <div class="stat-info">
                            <div class="stat-value" id="expired-licenses">-</div>
                            <div class="stat-label">ÎßåÎ£åÎêú ÎùºÏù¥ÏÑ†Ïä§</div>
                        </div>
                    </div>
                    <div class="stat-card info">
                        <div class="stat-icon">üíª</div>
                        <div class="stat-info">
                            <div class="stat-value" id="total-devices">-</div>
                            <div class="stat-label">ÌôúÏÑ± ÎîîÎ∞îÏù¥Ïä§</div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3>ÏµúÍ∑º ÌôúÎèô</h3>
                    <div style="display:flex; gap:8px; align-items:center; margin: 8px 0 12px;">
                        <select id="activities-type" class="browser-default" style="max-width: 160px;">
                            <option value="">Ï†ÑÏ≤¥</option>
                            <option value="device">ÎîîÎ∞îÏù¥Ïä§</option>
                            <option value="admin">Í¥ÄÎ¶¨Ïûê</option>
                        </select>
                        <input id="activities-action" placeholder="Ïï°ÏÖò ÌïÑÌÑ∞ (Ïòà: validated, login)" style="flex:1;"/>
                        <input id="activities-limit" type="number" min="1" max="100" value="20" style="width:90px;"/>
                        <button id="activities-apply" class="btn btn-small grey lighten-1">Ï†ÅÏö©</button>
                    </div>
                    <div id="recent-activities" class="activity-list">
                        <div class="loading">Î°úÎî© Ï§ë...</div>
                    </div>
                </div>

                <div class="section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3>ÎîîÎ∞îÏù¥Ïä§ Í¥ÄÎ¶¨</h3>
                        <button id="cleanup-devices-btn" class="btn amber darken-1">üóëÔ∏è ÎπÑÌôúÏÑ± ÎîîÎ∞îÏù¥Ïä§ Ï†ïÎ¶¨</button>
                    </div>
                    <p style="color: var(--secondary-color); font-size: 0.9rem;">
                        Ïò§ÎûòÎêú ÎπÑÌôúÏÑ± ÎîîÎ∞îÏù¥Ïä§Î•º ÏÇ≠Ï†úÌïòÏó¨ Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§Î•º Ï†ïÎ¶¨Ìï† Ïàò ÏûàÏäµÎãàÎã§.
                    </p>
                </div>
            </div>

            <!-- Í¥ÄÎ¶¨Ïûê Í¥ÄÎ¶¨ Ïª®ÌÖêÏ∏† (ÏäàÌçº Í¥ÄÎ¶¨Ïûê Ï†ÑÏö©) -->
            <div id="admins-content" class="content">
                <div class="page-header">
                    <h2>üë• Í¥ÄÎ¶¨Ïûê Í¥ÄÎ¶¨</h2>
                    <button id="create-admin-btn" class="btn green">+ ÏÑúÎ∏å Í¥ÄÎ¶¨Ïûê ÏÉùÏÑ±</button>
                </div>
                <div class="table-container">
                    <table class="striped highlight responsive-table">
                        <thead>
                            <tr>
                                <th>ÏïÑÏù¥Îîî</th>
                                <th>Ïù¥Î©îÏùº</th>
                                <th>Ïó≠Ìï†</th>
                                <th>ÏÉùÏÑ±Ïùº</th>
                                <th>ÏûëÏóÖ</th>
                            </tr>
                        </thead>
                        <tbody id="admins-tbody">
                            <tr><td colspan="5" class="text-center">Î°úÎî© Ï§ë...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Ï†úÌíà Í¥ÄÎ¶¨ Ïª®ÌÖêÏ∏† -->
            <div id="products-content" class="content">
                <div class="page-header">
                    <h2>üì¶ Ï†úÌíà Í¥ÄÎ¶¨</h2>
                    <button id="create-product-btn" class="btn blue">+ Ï†úÌíà ÏÉùÏÑ±</button>
                </div>

                <div class="table-container">
                    <table class="striped highlight responsive-table">
                        <thead>
                            <tr>
                                <th>Ï†úÌíàÎ™Ö</th>
                                <th>ÏÑ§Î™Ö</th>
                                <th>ÏÉÅÌÉú</th>
                                <th>ÏÉùÏÑ±Ïùº</th>
                                <th>ÏûëÏóÖ</th>
                            </tr>
                        <tbody id="products-table">
                            <tr>
                                <td colspan="6" class="text-center">Î°úÎî© Ï§ë...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ÎùºÏù¥ÏÑ†Ïä§ Í¥ÄÎ¶¨ Ïª®ÌÖêÏ∏† -->
            <div id="licenses-content" class="content">
                <div class="page-header">
                    <h2>üé´ ÎùºÏù¥ÏÑ†Ïä§ Í¥ÄÎ¶¨</h2>
                    <button id="create-license-btn" class="btn btn-primary">+ ÏÉà ÎùºÏù¥ÏÑ†Ïä§</button>
                </div>

                <div class="search-bar">
                    <input type="text" id="search-input" placeholder="Í≤ÄÏÉâ (ÎùºÏù¥ÏÑ†Ïä§ ÌÇ§, Í≥†Í∞ùÎ™Ö, Ïù¥Î©îÏùº)">
                    <select id="status-filter" class="browser-default" style="max-width: 180px;">
                        <option value="">Ï†ÑÏ≤¥ ÏÉÅÌÉú</option>
                        <option value="active">ÌôúÏÑ±</option>
                        <option value="expired">ÎßåÎ£å</option>
                        <option value="revoked">ÌèêÍ∏∞</option>
                    </select>
                </div>

                <div id="licenses-table" class="table-container">
                    <table class="striped highlight responsive-table">
                        <thead>
                            <tr>
                                <th>ÎùºÏù¥ÏÑ†Ïä§ ÌÇ§</th>
                                <th>Ï†úÌíàÎ™Ö</th>
                                <th>Ï†ïÏ±Ö</th>
                                <th>Í≥†Í∞ùÎ™Ö</th>
                                <th>ÏµúÎåÄ ÎîîÎ∞îÏù¥Ïä§</th>
                                <th>ÎßåÎ£åÏùº</th>
                                <th>ÏÉÅÌÉú</th>
                                <th>ÏûëÏóÖ</th>
                            </tr>
                        </thead>
                        <tbody id="licenses-tbody">
                            <tr>
                                <td colspan="8" class="loading">Î°úÎî© Ï§ë...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div id="pagination" class="pagination"></div>
            </div>

            <!-- Ï†ïÏ±Ö Í¥ÄÎ¶¨ Ïª®ÌÖêÏ∏† -->
            <div id="policies-content" class="content">
                <div class="page-header">
                    <h2>üõ°Ô∏è Ï†ïÏ±Ö Í¥ÄÎ¶¨</h2>
                    <button class="btn blue" onclick="openCreatePolicyModal()">
                        <i class="material-icons left">add</i>ÏÉà Ï†ïÏ±Ö ÏÉùÏÑ±
                    </button>
                </div>

                <div class="table-container">
                    <table class="striped highlight responsive-table">
                        <thead>
                            <tr>
                                <th>Ï†ïÏ±ÖÎ™Ö</th>
                                <th>Ï†ïÏ±Ö Îç∞Ïù¥ÌÑ∞</th>
                                <th>ÏÉÅÌÉú</th>
                                <th>ÏÉùÏÑ±/ÏàòÏ†ï ÏãúÍ∞Ñ</th>
                                <th>ÏûëÏóÖ</th>
                            </tr>
                        </thead>
                        <tbody id="policies-tbody">
                            <tr><td colspan="5" class="text-center">Ï†ïÏ±ÖÏùÑ Î∂àÎü¨Ïò§Îäî Ï§ë...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Swagger Ïª®ÌÖêÏ∏† -->
            <div id="swagger-content" class="content">
                <h2>üìö API Î¨∏ÏÑú</h2>
                <iframe src="/swagger/index.html" style="width: 100%; height: calc(100vh - 200px); border: none;"></iframe>
            </div>
        </div>
    </div>

    <!-- Ï†úÌíà ÏÉùÏÑ±/ÏàòÏ†ï Î™®Îã¨ -->
    <div id="product-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="product-modal-title">ÏÉà Ï†úÌíà ÏÉùÏÑ±</h3>
                <button class="modal-close" aria-label="Îã´Í∏∞" title="Îã´Í∏∞">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="product-form">
                <div class="form-group">
                    <label for="product_name_input">Ï†úÌíàÎ™Ö *</label>
                    <input type="text" id="product_name_input" name="name" required>
                </div>
                <div class="form-group">
                    <label for="product_description">ÏÑ§Î™Ö</label>
                    <textarea id="product_description" name="description" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn grey darken-1 modal-close">Ï∑®ÏÜå</button>
                    <button type="submit" class="btn blue">ÏÉùÏÑ±</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ÎùºÏù¥ÏÑ†Ïä§ ÏÉùÏÑ±/ÏàòÏ†ï Î™®Îã¨ -->
    <div id="license-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">ÏÉà ÎùºÏù¥ÏÑ†Ïä§ ÏÉùÏÑ±</h3>
                <button class="modal-close" aria-label="Îã´Í∏∞" title="Îã´Í∏∞">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="license-form">
                <div class="form-group">
                    <label for="product_select">Ï†úÌíà ÏÑ†ÌÉù *</label>
                    <select id="product_select" required class="browser-default">
                        <option value="" disabled selected>Ï†úÌíàÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                    </select>
                    <input type="hidden" id="product_id_hidden" name="product_id" />
                </div>
                <div class="form-group">
                    <label for="policy_select">Ï†ïÏ±Ö ÏÑ†ÌÉù</label>
                    <select id="policy_select" name="policy_id" class="browser-default">
                        <option value="">Ï†ïÏ±ÖÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî (ÏÑ†ÌÉùÏÇ¨Ìï≠)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="customer_name">Í≥†Í∞ùÎ™Ö *</label>
                    <input type="text" id="customer_name" name="customer_name" required>
                </div>
                <div class="form-group">
                    <label for="customer_email">Í≥†Í∞ù Ïù¥Î©îÏùº *</label>
                    <input type="email" id="customer_email" name="customer_email" required>
                </div>
                <div class="form-group">
                    <label for="max_devices">ÏµúÎåÄ ÎîîÎ∞îÏù¥Ïä§ Ïàò *</label>
                    <input type="number" id="max_devices" name="max_devices" min="1" value="1" required>
                </div>
                <div class="form-group">
                    <label for="expires_at">ÎßåÎ£åÏùº *</label>
                    <input type="date" id="expires_at" name="expires_at" required>
                </div>
                <div class="form-group">
                    <label for="notes">Î©îÎ™®</label>
                    <textarea id="notes" name="notes" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn grey darken-1 modal-close">Ï∑®ÏÜå</button>
                    <button type="submit" class="btn blue">ÏÉùÏÑ±</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ÎùºÏù¥ÏÑ†Ïä§ ÏÉÅÏÑ∏ Î™®Îã¨ -->
    <div id="license-detail-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ÎùºÏù¥ÏÑ†Ïä§ ÏÉÅÏÑ∏</h3>
                <button class="modal-close" aria-label="Îã´Í∏∞" title="Îã´Í∏∞">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div id="license-detail-content" class="license-detail">
                <!-- JavaScriptÎ°ú Ï±ÑÏõÄ -->
            </div>
        </div>
    </div>

    <!-- ÎùºÏù¥ÏÑ†Ïä§ ÏàòÏ†ï Î™®Îã¨ -->
    <div id="edit-license-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚úèÔ∏è ÎùºÏù¥ÏÑ†Ïä§ ÏàòÏ†ï</h3>
                <button class="modal-close" aria-label="Îã´Í∏∞" title="Îã´Í∏∞">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="edit-license-form">
                <input type="hidden" id="edit_license_id" name="license_id">
                <div class="form-group">
                    <label for="edit_product_name">Ï†úÌíàÎ™Ö *</label>
                    <input type="text" id="edit_product_name" name="product_name" required readonly style="background-color: #f5f5f5;">
                </div>
                <div class="form-group">
                    <label for="edit_policy_select">Ï†ÅÏö© Ï†ïÏ±Ö</label>
                    <select id="edit_policy_select" name="policy_id" class="browser-default">
                        <option value="">Ï†ïÏ±Ö ÏóÜÏùå</option>
                    </select>
                    <small style="color: #6b7280;">Ï†ïÏ±ÖÏùÑ Î≥ÄÍ≤ΩÌïòÍ±∞ÎÇò Ï†úÍ±∞Ìï† Ïàò ÏûàÏäµÎãàÎã§.</small>
                </div>
                <div class="form-group">
                    <label for="edit_customer_name">Í≥†Í∞ùÎ™Ö *</label>
                    <input type="text" id="edit_customer_name" name="customer_name" required>
                </div>
                <div class="form-group">
                    <label for="edit_customer_email">Í≥†Í∞ù Ïù¥Î©îÏùº *</label>
                    <input type="email" id="edit_customer_email" name="customer_email" required>
                </div>
                <div class="form-group">
                    <label for="edit_max_devices">ÏµúÎåÄ ÎîîÎ∞îÏù¥Ïä§ Ïàò *</label>
                    <input type="number" id="edit_max_devices" name="max_devices" min="1" required>
                </div>
                <div class="form-group">
                    <label for="edit_expires_at">ÎßåÎ£åÏùº *</label>
                    <input type="date" id="edit_expires_at" name="expires_at" required>
                </div>
                <div class="form-group">
                    <label for="edit_notes">Î©îÎ™®</label>
                    <textarea id="edit_notes" name="notes" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn grey darken-1 modal-close">Ï∑®ÏÜå</button>
                    <button type="submit" class="btn blue">Ï†ÄÏû•</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω Î™®Îã¨ -->
    <div id="change-password-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω</h3>
                <button class="modal-close" aria-label="Îã´Í∏∞" title="Îã´Í∏∞">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="change-password-form">
                <div class="form-group">
                    <label for="current_password">ÌòÑÏû¨ ÎπÑÎ∞ÄÎ≤àÌò∏</label>
                    <input type="password" id="current_password" name="old_password" required>
                </div>
                <div class="form-group">
                    <label for="new_password">ÏÉà ÎπÑÎ∞ÄÎ≤àÌò∏ (8Ïûê Ïù¥ÏÉÅ)</label>
                    <input type="password" id="new_password" name="new_password" minlength="8" required>
                </div>
                <div class="form-group">
                    <label for="new_password_confirm">ÏÉà ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏</label>
                    <input type="password" id="new_password_confirm" required>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn grey darken-1 modal-close">Ï∑®ÏÜå</button>
                    <button type="submit" class="btn blue">Î≥ÄÍ≤Ω</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Í≥µÌÜµ Î©îÏãúÏßÄ/ÌôïÏù∏ Î™®Îã¨ -->
    <div id="dialog-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="dialog-title">ÏïåÎ¶º</h3>
                <button class="modal-close" aria-label="Îã´Í∏∞" title="Îã´Í∏∞">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p id="dialog-message">Î©îÏãúÏßÄ</p>
            </div>
            <div class="modal-footer">
                <button type="button" id="dialog-cancel" class="btn grey darken-1" style="display:none;">Ï∑®ÏÜå</button>
                <button type="button" id="dialog-ok" class="btn blue">ÌôïÏù∏</button>
            </div>
        </div>
    </div>

    <!-- ÎîîÎ∞îÏù¥Ïä§ Ï†ïÎ¶¨ Î™®Îã¨ -->
    <div id="cleanup-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üóëÔ∏è ÎπÑÌôúÏÑ± ÎîîÎ∞îÏù¥Ïä§ Ï†ïÎ¶¨</h3>
                <button class="modal-close" aria-label="Îã´Í∏∞" title="Îã´Í∏∞">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 1rem;">ÎπÑÌôúÏÑ±ÌôîÎêú ÏßÄ ÏùºÏ†ï Í∏∞Í∞ÑÏù¥ ÏßÄÎÇú ÎîîÎ∞îÏù¥Ïä§Î•º Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ÏóêÏÑú ÏÇ≠Ï†úÌï©ÎãàÎã§.</p>
                <div class="form-group">
                    <label for="cleanup-days">ÏÇ≠Ï†ú Í∏∞Ï§Ä (Ïùº)</label>
                    <input type="number" id="cleanup-days" value="90" min="0" max="365" required style="max-width: 160px;">
                    <small style="color: var(--secondary-color);">ÎπÑÌôúÏÑ±ÌôîÎêú ÏßÄ ÏúÑ Í∏∞Í∞Ñ(Ïùº)Î≥¥Îã§ Ïò§ÎûòÎêú ÎîîÎ∞îÏù¥Ïä§Îßå ÏÇ≠Ï†úÎê©ÎãàÎã§. (0 = Ïò§Îäò Ìè¨Ìï® Ï†ÑÏ≤¥)</small>
                </div>
                <div id="cleanup-preview" style="margin-top: 1rem; padding: 0.75rem; background: var(--bg-color); border-radius: 4px; display: none;">
                    <strong>ÏòàÏÉÅ ÏÇ≠Ï†ú ÎåÄÏÉÅ:</strong> <span id="cleanup-count">-</span>Í∞ú ÎîîÎ∞îÏù¥Ïä§
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary modal-close">Ï∑®ÏÜå</button>
                <button type="button" id="cleanup-confirm-btn" class="btn btn-danger">ÏÇ≠Ï†ú</button>
            </div>
        </div>
    </div>

    <!-- ÏÑúÎ∏å Í¥ÄÎ¶¨Ïûê ÏÉùÏÑ± Î™®Îã¨ (ÏäàÌçº Ï†ÑÏö©) -->
    <div id="create-admin-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ÏÑúÎ∏å Í¥ÄÎ¶¨Ïûê ÏÉùÏÑ±</h3>
                <button class="modal-close" aria-label="Îã´Í∏∞" title="Îã´Í∏∞">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="create-admin-form">
                <div class="form-group">
                    <label for="admin_username">ÏïÑÏù¥Îîî *</label>
                    <input type="text" id="admin_username" name="username" minlength="3" required>
                </div>
                <div class="form-group">
                    <label for="admin_email">Ïù¥Î©îÏùº *</label>
                    <input type="email" id="admin_email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="admin_password">ÎπÑÎ∞ÄÎ≤àÌò∏ (8Ïûê Ïù¥ÏÉÅ) *</label>
                    <input type="password" id="admin_password" name="password" minlength="8" required>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn grey darken-1 modal-close">Ï∑®ÏÜå</button>
                    <button type="submit" class="btn green">ÏÉùÏÑ±</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Ï†ïÏ±Ö ÏÉùÏÑ± Î™®Îã¨ -->
    <div id="create-policy-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üõ°Ô∏è ÏÉà Ï†ïÏ±Ö ÏÉùÏÑ±</h3>
                <button class="modal-close" aria-label="Îã´Í∏∞" title="Îã´Í∏∞">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="create-policy-form">
                <div class="form-group">
                    <label for="policy_name">Ï†ïÏ±ÖÎ™Ö *</label>
                    <input type="text" id="policy_name" name="policy_name" placeholder="Ïòà: ÌîÑÎ¶¨ÎØ∏ÏóÑ Ï†ïÏ±Ö" required>
                </div>
                <div class="form-group">
                    <label for="policy_data">Ï†ïÏ±Ö Îç∞Ïù¥ÌÑ∞ (JSON) *</label>
                    <textarea id="policy_data" name="policy_data" rows="10" placeholder='{"feature": "enabled"}' style="font-family: monospace;" required></textarea>
                    <small style="color: #6b7280;">Ïú†Ìö®Ìïú JSON ÌòïÏãùÏúºÎ°ú ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.</small>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn grey darken-1 modal-close">Ï∑®ÏÜå</button>
                    <button type="submit" class="btn blue">ÏÉùÏÑ±</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Ï†ïÏ±Ö ÏàòÏ†ï Î™®Îã¨ -->
    <div id="edit-policy-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚úèÔ∏è Ï†ïÏ±Ö ÏàòÏ†ï</h3>
                <button class="modal-close" aria-label="Îã´Í∏∞" title="Îã´Í∏∞">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="edit-policy-form">
                <input type="hidden" id="edit_policy_id" name="policy_id">
                <div class="form-group">
                    <label for="edit_policy_name">Ï†ïÏ±ÖÎ™Ö *</label>
                    <input type="text" id="edit_policy_name" name="policy_name" required>
                </div>
                <div class="form-group">
                    <label for="edit_policy_data">Ï†ïÏ±Ö Îç∞Ïù¥ÌÑ∞ (JSON) *</label>
                    <textarea id="edit_policy_data" name="policy_data" rows="12" style="font-family: monospace;" required></textarea>
                    <small style="color: #6b7280;">Ïú†Ìö®Ìïú JSON ÌòïÏãùÏúºÎ°ú ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.</small>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn grey darken-1 modal-close">Ï∑®ÏÜå</button>
                    <button type="submit" class="btn blue">Ï†ÄÏû•</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Materialize JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script type="module" src="./js/main.js"></script>

    <!-- Í∏ÄÎ°úÎ≤å Î°úÎî© Ïò§Î≤ÑÎ†àÏù¥ -->
    <div id="global-loading" class="loading-overlay" style="display:none;">
        <div class="loading-content">
            <div class="spinner"></div>
            <div class="loading-text">Î∂àÎü¨Ïò§Îäî Ï§ë...</div>
        </div>
    </div>
</body>
</html>
