<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studio License Admin</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Materialize CSS & Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!-- Override Materialize CSS modal styles for our custom modals -->
        <style>
            /* Materialize CSS ëª¨ë‹¬ ìŠ¤íƒ€ì¼ ì™„ì „íˆ ì¬ì •ì˜ */
            .modal.studio-modal { 
                position: fixed !important; 
                top: 0 !important; 
                left: 0 !important; 
                right: 0 !important;
                bottom: 0 !important;
                width: 100% !important; 
                height: 100% !important; 
                background: rgba(0, 0, 0, 0.5) !important;
                z-index: 14000 !important; 
                display: flex !important; 
                align-items: center !important; 
                justify-content: center !important; 
                opacity: 0 !important; 
                visibility: hidden !important; 
                pointer-events: none !important; 
                transition: opacity .2s ease !important;
                max-height: none !important;
                overflow: visible !important;
                border: none !important;
                outline: none !important;
                box-shadow: none !important;
            }
            .modal.studio-modal.active { 
                opacity: 1 !important; 
                visibility: visible !important; 
                pointer-events: auto !important; 
            }
            .modal.studio-modal .modal-content { 
                background: #fff !important; 
                border-radius: 12px !important; 
                max-width: 600px !important; 
                width: 90% !important; 
                max-height: 90vh !important; 
                overflow-y: auto !important; 
                transform: translateY(-8px) scale(.98) !important; 
                opacity: .98 !important; 
                transition: transform .2s ease, opacity .2s ease, box-shadow .2s ease !important; 
                box-shadow: 0 1px 3px rgba(0,0,0,.1) !important; 
                z-index: 14001 !important;
                position: relative !important;
                border: none !important;
                outline: none !important;
                padding: 0 !important;
            }
            .modal.studio-modal.active .modal-content { 
                transform: translateY(0) scale(1) !important; 
                opacity: 1 !important; 
                box-shadow: 0 10px 15px rgba(0,0,0,.1) !important; 
            }
            .modal.studio-modal .modal-header { 
                display: flex !important; 
                justify-content: space-between !important; 
                align-items: center !important; 
                padding: 1.5rem !important; 
                border-bottom: 1px solid #e5e7eb !important; 
            }
            .modal.studio-modal .modal-body {
                padding: 1.5rem !important;
            }
            .modal.studio-modal .modal-footer { 
                display: flex !important; 
                justify-content: flex-end !important; 
                gap: .5rem !important; 
                padding: 1rem 1.5rem !important; 
                border-top: 1px solid #e5e7eb !important; 
            }
            /* ëª¨ë‹¬ ë‹«ê¸° ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
            .modal.studio-modal .modal-close {
                background: none !important;
                border: none !important;
                padding: 0.25rem !important;
                cursor: pointer !important;
                color: #6b7280 !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                border-radius: 4px !important;
                transition: all 0.2s ease !important;
                width: 32px !important;
                height: 32px !important;
                min-width: unset !important;
                box-shadow: none !important;
                text-transform: none !important;
                line-height: 1 !important;
                margin: 0 !important;
            }
            .modal.studio-modal .modal-close:hover {
                background: #f3f4f6 !important;
                color: #111827 !important;
            }
            .modal.studio-modal .modal-close:focus {
                outline: 2px solid #3b82f6 !important;
                outline-offset: 2px !important;
            }
            /* ëª¨ë‹¬ í‘¸í„° ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì¬ì •ì˜ */
            .modal.studio-modal .modal-footer button {
                display: inline-flex !important;
                align-items: center !important;
                justify-content: center !important;
                padding: 0.5rem 1.5rem !important;
                border-radius: 6px !important;
                font-size: 1rem !important;
                font-weight: 500 !important;
                cursor: pointer !important;
                transition: all 0.2s ease !important;
                text-transform: none !important;
                line-height: 1.5 !important;
                white-space: nowrap !important;
                min-width: 80px !important;
                height: auto !important;
                border: 1px solid transparent !important;
                box-shadow: none !important;
                letter-spacing: normal !important;
                vertical-align: middle !important;
            }
            .modal.studio-modal .modal-footer .btn {
                display: inline-flex !important;
                align-items: center !important;
                justify-content: center !important;
                padding: 0.5rem 1.5rem !important;
                margin: 0 !important;
            }
            .modal.studio-modal .modal-footer .btn.grey,
            .modal.studio-modal .modal-footer .btn.grey.darken-1 {
                background-color: #757575 !important;
                color: #fff !important;
                border: none !important;
            }
            .modal.studio-modal .modal-footer .btn.grey:hover,
            .modal.studio-modal .modal-footer .btn.grey.darken-1:hover {
                background-color: #616161 !important;
                box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
            }
            .modal.studio-modal .modal-footer .btn.blue {
                background-color: #2196F3 !important;
                color: #fff !important;
                border: none !important;
            }
            .modal.studio-modal .modal-footer .btn.blue:hover {
                background-color: #1976D2 !important;
                box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
            }
            .modal.studio-modal .modal-footer .btn.green {
                background-color: #4CAF50 !important;
                color: #fff !important;
                border: none !important;
            }
            .modal.studio-modal .modal-footer .btn.green:hover {
                background-color: #388E3C !important;
                box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
            }
            /* Materializeì˜ modal-overlay ì œê±° */
            .modal-overlay {
                display: none !important;
            }
            /* Materialize ë²„íŠ¼ì˜ ëª¨ë“  ê¸°ë³¸ ìŠ¤íƒ€ì¼ ë¬´ë ¥í™” */
            .modal.studio-modal button.btn,
            .modal.studio-modal button.btn-large,
            .modal.studio-modal button.btn-small,
            .modal.studio-modal button.btn-flat {
                text-decoration: none !important;
                color: #fff !important;
                text-align: center !important;
                letter-spacing: normal !important;
                transition: background-color 0.2s ease !important;
                cursor: pointer !important;
                border: none !important;
                border-radius: 6px !important;
                display: inline-flex !important;
                align-items: center !important;
                justify-content: center !important;
                height: auto !important;
                line-height: 1.5 !important;
                padding: 0.5rem 1.5rem !important;
                text-transform: none !important;
                vertical-align: middle !important;
                -webkit-tap-highlight-color: transparent !important;
                box-shadow: none !important;
                outline: 0 !important;
                min-width: 80px !important;
            }
        </style>
</head>
<body>
    <!-- ë¡œê·¸ì¸ í˜ì´ì§€ -->
    <div id="login-page" class="page active">
        <div class="login-container">
            <div class="login-box">
                <h1>ğŸ” Studio License</h1>
                <p class="subtitle">ê´€ë¦¬ì ë¡œê·¸ì¸</p>
                <form id="login-form" onsubmit="handleLoginForm(event)">
                    <div class="form-group">
                        <label for="username">ì•„ì´ë””</label>
                        <input type="text" id="username" name="username" required placeholder="admin">
                    </div>
                    <div class="form-group">
                        <label for="password">ë¹„ë°€ë²ˆí˜¸</label>
                        <input type="password" id="password" name="password" required placeholder="â€¢â€¢â€¢â€¢â€¢â€¢">
                    </div>
                    <button type="submit" class="btn blue" style="width:100%">ë¡œê·¸ì¸</button>
                    <div id="login-error" class="error-message"></div>
                </form>
            </div>
        </div>
    </div>

    <!-- ëŒ€ì‹œë³´ë“œ -->
    <div id="dashboard-page" class="page">
        <nav class="app-nav">
            <div class="nav-brand">ğŸ« Studio License</div>
            <div class="nav-menu">
                <a href="#" data-page="dashboard" class="nav-link active">ëŒ€ì‹œë³´ë“œ</a>
                <a href="#" data-page="licenses" class="nav-link">ë¼ì´ì„ ìŠ¤</a>
                <a href="#" data-page="products" class="nav-link">ì œí’ˆ</a>
                <a href="#" data-page="policies" class="nav-link">ì •ì±…</a>
                <a href="#" data-page="admins" class="nav-link" id="admins-tab" style="display:none;">ê´€ë¦¬ì</a>
                <a href="#" data-page="swagger" class="nav-link">API ë¬¸ì„œ</a>
            </div>
            <div class="nav-user">
                <div class="user-badge">
                    <svg class="user-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                    </svg>
                    <span id="user-name">Admin</span>
                </div>
                <button id="change-password-btn" class="btn btn-sm">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
                <button id="logout-btn" class="btn btn-sm">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </nav>

        <div class="container">
            <!-- ëŒ€ì‹œë³´ë“œ ì»¨í…ì¸  -->
            <div id="dashboard-content" class="content active">
                <h2>ğŸ“Š ëŒ€ì‹œë³´ë“œ</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“‹</div>
                        <div class="stat-info">
                            <div class="stat-value" id="total-licenses">-</div>
                            <div class="stat-label">ì´ ë¼ì´ì„ ìŠ¤</div>
                        </div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-icon">âœ…</div>
                        <div class="stat-info">
                            <div class="stat-value" id="active-licenses">-</div>
                            <div class="stat-label">í™œì„± ë¼ì´ì„ ìŠ¤</div>
                        </div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-icon">â°</div>
                        <div class="stat-info">
                            <div class="stat-value" id="expired-licenses">-</div>
                            <div class="stat-label">ë§Œë£Œëœ ë¼ì´ì„ ìŠ¤</div>
                        </div>
                    </div>
                    <div class="stat-card info">
                        <div class="stat-icon">ğŸ’»</div>
                        <div class="stat-info">
                            <div class="stat-value" id="total-devices">-</div>
                            <div class="stat-label">í™œì„± ë””ë°”ì´ìŠ¤</div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3>ìµœê·¼ í™œë™</h3>
                    <div style="display:flex; gap:8px; align-items:center; margin: 8px 0 12px;">
                        <select id="activities-type" class="browser-default" style="max-width: 160px;">
                            <option value="">ì „ì²´</option>
                            <option value="device">ë””ë°”ì´ìŠ¤</option>
                            <option value="admin">ê´€ë¦¬ì</option>
                        </select>
                        <input id="activities-action" placeholder="ì•¡ì…˜ í•„í„° (ì˜ˆ: validated, login)" style="flex:1;"/>
                        <input id="activities-limit" type="number" min="1" max="100" value="20" style="width:90px;"/>
                        <button id="activities-apply" class="btn btn-small grey lighten-1">ì ìš©</button>
                    </div>
                    <div id="recent-activities" class="activity-list">
                        <div class="loading">ë¡œë”© ì¤‘...</div>
                    </div>
                </div>

                <div class="section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3>ë””ë°”ì´ìŠ¤ ê´€ë¦¬</h3>
                        <button id="cleanup-devices-btn" class="btn amber darken-1">ğŸ—‘ï¸ ë¹„í™œì„± ë””ë°”ì´ìŠ¤ ì •ë¦¬</button>
                    </div>
                    <p style="color: var(--secondary-color); font-size: 0.9rem;">
                        ì˜¤ë˜ëœ ë¹„í™œì„± ë””ë°”ì´ìŠ¤ë¥¼ ì‚­ì œí•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì •ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>
                </div>
            </div>

            <!-- ê´€ë¦¬ì ê´€ë¦¬ ì»¨í…ì¸  (ìŠˆí¼ ê´€ë¦¬ì ì „ìš©) -->
            <div id="admins-content" class="content">
                <div class="page-header">
                    <h2>ğŸ‘¥ ê´€ë¦¬ì ê´€ë¦¬</h2>
                    <button id="create-admin-btn" class="btn green">+ ì„œë¸Œ ê´€ë¦¬ì ìƒì„±</button>
                </div>
                <div class="table-container">
                    <table class="striped highlight responsive-table">
                        <thead>
                            <tr>
                                <th>ì•„ì´ë””</th>
                                <th>ì´ë©”ì¼</th>
                                <th>ì—­í• </th>
                                <th>ìƒì„±ì¼</th>
                                <th>ì‘ì—…</th>
                            </tr>
                        </thead>
                        <tbody id="admins-tbody">
                            <tr><td colspan="5" class="text-center">ë¡œë”© ì¤‘...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ì œí’ˆ ê´€ë¦¬ ì»¨í…ì¸  -->
            <div id="products-content" class="content">
                <div class="page-header">
                    <h2>ğŸ“¦ ì œí’ˆ ê´€ë¦¬</h2>
                    <button id="create-product-btn" class="btn blue">+ ì œí’ˆ ìƒì„±</button>
                </div>

                <div class="table-container">
                    <table class="striped highlight responsive-table">
                        <thead>
                            <tr>
                                <th>ì œí’ˆëª…</th>
                                <th>ì„¤ëª…</th>
                                <th>ìƒíƒœ</th>
                                <th>ìƒì„±ì¼</th>
                                <th>ì‘ì—…</th>
                            </tr>
                        <tbody id="products-table">
                            <tr>
                                <td colspan="6" class="text-center">ë¡œë”© ì¤‘...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ë¼ì´ì„ ìŠ¤ ê´€ë¦¬ ì»¨í…ì¸  -->
            <div id="licenses-content" class="content">
                <div class="page-header">
                    <h2>ğŸ« ë¼ì´ì„ ìŠ¤ ê´€ë¦¬</h2>
                    <button id="create-license-btn" class="btn btn-primary">+ ìƒˆ ë¼ì´ì„ ìŠ¤</button>
                </div>

                <div class="search-bar">
                    <input type="text" id="search-input" placeholder="ê²€ìƒ‰ (ë¼ì´ì„ ìŠ¤ í‚¤, ê³ ê°ëª…, ì´ë©”ì¼)">
                    <select id="status-filter" class="browser-default" style="max-width: 180px;">
                        <option value="">ì „ì²´ ìƒíƒœ</option>
                        <option value="active">í™œì„±</option>
                        <option value="expired">ë§Œë£Œ</option>
                        <option value="revoked">íê¸°</option>
                    </select>
                </div>

                <div id="licenses-table" class="table-container">
                    <table class="striped highlight responsive-table">
                        <thead>
                            <tr>
                                <th>ë¼ì´ì„ ìŠ¤ í‚¤</th>
                                <th>ì œí’ˆëª…</th>
                                <th>ì •ì±…</th>
                                <th>ê³ ê°ëª…</th>
                                <th>ìµœëŒ€ ë””ë°”ì´ìŠ¤</th>
                                <th>ë§Œë£Œì¼</th>
                                <th>ìƒíƒœ</th>
                                <th>ì‘ì—…</th>
                            </tr>
                        </thead>
                        <tbody id="licenses-tbody">
                            <tr>
                                <td colspan="8" class="loading">ë¡œë”© ì¤‘...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div id="pagination" class="pagination"></div>
            </div>

            <!-- ì •ì±… ê´€ë¦¬ ì»¨í…ì¸  -->
            <div id="policies-content" class="content">
                <div class="page-header">
                    <h2>ğŸ›¡ï¸ ì •ì±… ê´€ë¦¬</h2>
                    <button class="btn blue" onclick="openCreatePolicyModal()">
                        <i class="material-icons left">add</i>ìƒˆ ì •ì±… ìƒì„±
                    </button>
                </div>

                <div class="table-container">
                    <table class="striped highlight responsive-table">
                        <thead>
                            <tr>
                                <th>ì •ì±…ëª…</th>
                                <th>ì •ì±… ë°ì´í„°</th>
                                <th>ìƒíƒœ</th>
                                <th>ìƒì„±/ìˆ˜ì • ì‹œê°„</th>
                                <th>ì‘ì—…</th>
                            </tr>
                        </thead>
                        <tbody id="policies-tbody">
                            <tr><td colspan="5" class="text-center">ì •ì±…ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Swagger ì»¨í…ì¸  -->
            <div id="swagger-content" class="content">
                <h2>ğŸ“š API ë¬¸ì„œ</h2>
                <iframe src="/swagger/index.html" style="width: 100%; height: calc(100vh - 200px); border: none;"></iframe>
            </div>
        </div>
    </div>

    <!-- ì œí’ˆ ìƒì„±/ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="product-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="product-modal-title">ìƒˆ ì œí’ˆ ìƒì„±</h3>
                <button class="modal-close" aria-label="ë‹«ê¸°" title="ë‹«ê¸°">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="product-form">
                <div class="form-group">
                    <label for="product_name_input">ì œí’ˆëª… *</label>
                    <input type="text" id="product_name_input" name="name" required>
                </div>
                <div class="form-group">
                    <label for="product_description">ì„¤ëª…</label>
                    <textarea id="product_description" name="description" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn grey darken-1 modal-close">ì·¨ì†Œ</button>
                    <button type="submit" class="btn blue">ìƒì„±</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ë¼ì´ì„ ìŠ¤ ìƒì„±/ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="license-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">ìƒˆ ë¼ì´ì„ ìŠ¤ ìƒì„±</h3>
                <button class="modal-close" aria-label="ë‹«ê¸°" title="ë‹«ê¸°">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="license-form">
                <div class="form-group">
                    <label for="product_select">ì œí’ˆ ì„ íƒ *</label>
                    <select id="product_select" required class="browser-default">
                        <option value="" disabled selected>ì œí’ˆì„ ì„ íƒí•˜ì„¸ìš”</option>
                    </select>
                    <input type="hidden" id="product_id_hidden" name="product_id" />
                </div>
                <div class="form-group">
                    <label for="policy_select">ì •ì±… ì„ íƒ</label>
                    <select id="policy_select" name="policy_id" class="browser-default">
                        <option value="">ì •ì±…ì„ ì„ íƒí•˜ì„¸ìš” (ì„ íƒì‚¬í•­)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="customer_name">ê³ ê°ëª… *</label>
                    <input type="text" id="customer_name" name="customer_name" required>
                </div>
                <div class="form-group">
                    <label for="customer_email">ê³ ê° ì´ë©”ì¼ *</label>
                    <input type="email" id="customer_email" name="customer_email" required>
                </div>
                <div class="form-group">
                    <label for="max_devices">ìµœëŒ€ ë””ë°”ì´ìŠ¤ ìˆ˜ *</label>
                    <input type="number" id="max_devices" name="max_devices" min="1" value="1" required>
                </div>
                <div class="form-group">
                    <label for="expires_at">ë§Œë£Œì¼ *</label>
                    <input type="date" id="expires_at" name="expires_at" required>
                </div>
                <div class="form-group">
                    <label for="notes">ë©”ëª¨</label>
                    <textarea id="notes" name="notes" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn grey darken-1 modal-close">ì·¨ì†Œ</button>
                    <button type="submit" class="btn blue">ìƒì„±</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ë¼ì´ì„ ìŠ¤ ìƒì„¸ ëª¨ë‹¬ -->
    <div id="license-detail-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ë¼ì´ì„ ìŠ¤ ìƒì„¸</h3>
                <button class="modal-close" aria-label="ë‹«ê¸°" title="ë‹«ê¸°">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div id="license-detail-content" class="license-detail">
                <!-- JavaScriptë¡œ ì±„ì›€ -->
            </div>
        </div>
    </div>

    <!-- ë¼ì´ì„ ìŠ¤ ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="edit-license-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>âœï¸ ë¼ì´ì„ ìŠ¤ ìˆ˜ì •</h3>
                <button class="modal-close" aria-label="ë‹«ê¸°" title="ë‹«ê¸°">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="edit-license-form">
                <input type="hidden" id="edit_license_id" name="license_id">
                <div class="form-group">
                    <label for="edit_product_name">ì œí’ˆëª… *</label>
                    <input type="text" id="edit_product_name" name="product_name" required readonly style="background-color: #f5f5f5;">
                </div>
                <div class="form-group">
                    <label for="edit_policy_select">ì ìš© ì •ì±…</label>
                    <select id="edit_policy_select" name="policy_id" class="browser-default">
                        <option value="">ì •ì±… ì—†ìŒ</option>
                    </select>
                    <small style="color: #6b7280;">ì •ì±…ì„ ë³€ê²½í•˜ê±°ë‚˜ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</small>
                </div>
                <div class="form-group">
                    <label for="edit_customer_name">ê³ ê°ëª… *</label>
                    <input type="text" id="edit_customer_name" name="customer_name" required>
                </div>
                <div class="form-group">
                    <label for="edit_customer_email">ê³ ê° ì´ë©”ì¼ *</label>
                    <input type="email" id="edit_customer_email" name="customer_email" required>
                </div>
                <div class="form-group">
                    <label for="edit_max_devices">ìµœëŒ€ ë””ë°”ì´ìŠ¤ ìˆ˜ *</label>
                    <input type="number" id="edit_max_devices" name="max_devices" min="1" required>
                </div>
                <div class="form-group">
                    <label for="edit_expires_at">ë§Œë£Œì¼ *</label>
                    <input type="date" id="edit_expires_at" name="expires_at" required>
                </div>
                <div class="form-group">
                    <label for="edit_notes">ë©”ëª¨</label>
                    <textarea id="edit_notes" name="notes" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn grey darken-1 modal-close">ì·¨ì†Œ</button>
                    <button type="submit" class="btn blue">ì €ì¥</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ëª¨ë‹¬ -->
    <div id="change-password-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h3>
                <button class="modal-close" aria-label="ë‹«ê¸°" title="ë‹«ê¸°">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="change-password-form">
                <div class="form-group">
                    <label for="current_password">í˜„ì¬ ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" id="current_password" name="old_password" required>
                </div>
                <div class="form-group">
                    <label for="new_password">ìƒˆ ë¹„ë°€ë²ˆí˜¸ (8ì ì´ìƒ)</label>
                    <input type="password" id="new_password" name="new_password" minlength="8" required>
                </div>
                <div class="form-group">
                    <label for="new_password_confirm">ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                    <input type="password" id="new_password_confirm" required>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn grey darken-1 modal-close">ì·¨ì†Œ</button>
                    <button type="submit" class="btn blue">ë³€ê²½</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ê³µí†µ ë©”ì‹œì§€/í™•ì¸ ëª¨ë‹¬ -->
    <div id="dialog-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="dialog-title">ì•Œë¦¼</h3>
                <button class="modal-close" aria-label="ë‹«ê¸°" title="ë‹«ê¸°">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p id="dialog-message">ë©”ì‹œì§€</p>
            </div>
            <div class="modal-footer">
                <button type="button" id="dialog-cancel" class="btn grey darken-1" style="display:none;">ì·¨ì†Œ</button>
                <button type="button" id="dialog-ok" class="btn blue">í™•ì¸</button>
            </div>
        </div>
    </div>

    <!-- ë””ë°”ì´ìŠ¤ ì •ë¦¬ ëª¨ë‹¬ -->
    <div id="cleanup-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ—‘ï¸ ë¹„í™œì„± ë””ë°”ì´ìŠ¤ ì •ë¦¬</h3>
                <button class="modal-close" aria-label="ë‹«ê¸°" title="ë‹«ê¸°">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 1rem;">ë¹„í™œì„±í™”ëœ ì§€ ì¼ì • ê¸°ê°„ì´ ì§€ë‚œ ë””ë°”ì´ìŠ¤ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚­ì œí•©ë‹ˆë‹¤.</p>
                <div class="form-group">
                    <label for="cleanup-days">ì‚­ì œ ê¸°ì¤€ (ì¼)</label>
                    <input type="number" id="cleanup-days" value="90" min="0" max="365" required style="max-width: 160px;">
                    <small style="color: var(--secondary-color);">ë¹„í™œì„±í™”ëœ ì§€ ìœ„ ê¸°ê°„(ì¼)ë³´ë‹¤ ì˜¤ë˜ëœ ë””ë°”ì´ìŠ¤ë§Œ ì‚­ì œë©ë‹ˆë‹¤. (0 = ì˜¤ëŠ˜ í¬í•¨ ì „ì²´)</small>
                </div>
                <div id="cleanup-preview" style="margin-top: 1rem; padding: 0.75rem; background: var(--bg-color); border-radius: 4px; display: none;">
                    <strong>ì˜ˆìƒ ì‚­ì œ ëŒ€ìƒ:</strong> <span id="cleanup-count">-</span>ê°œ ë””ë°”ì´ìŠ¤
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary modal-close">ì·¨ì†Œ</button>
                <button type="button" id="cleanup-confirm-btn" class="btn btn-danger">ì‚­ì œ</button>
            </div>
        </div>
    </div>

    <!-- ì„œë¸Œ ê´€ë¦¬ì ìƒì„± ëª¨ë‹¬ (ìŠˆí¼ ì „ìš©) -->
    <div id="create-admin-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ì„œë¸Œ ê´€ë¦¬ì ìƒì„±</h3>
                <button class="modal-close" aria-label="ë‹«ê¸°" title="ë‹«ê¸°">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="create-admin-form">
                <div class="form-group">
                    <label for="admin_username">ì•„ì´ë”” *</label>
                    <input type="text" id="admin_username" name="username" minlength="3" required>
                </div>
                <div class="form-group">
                    <label for="admin_email">ì´ë©”ì¼ *</label>
                    <input type="email" id="admin_email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="admin_password">ë¹„ë°€ë²ˆí˜¸ (8ì ì´ìƒ) *</label>
                    <input type="password" id="admin_password" name="password" minlength="8" required>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn grey darken-1 modal-close">ì·¨ì†Œ</button>
                    <button type="submit" class="btn green">ìƒì„±</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ì •ì±… ìƒì„± ëª¨ë‹¬ -->
    <div id="create-policy-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ›¡ï¸ ìƒˆ ì •ì±… ìƒì„±</h3>
                <button class="modal-close" aria-label="ë‹«ê¸°" title="ë‹«ê¸°">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="create-policy-form">
                <div class="form-group">
                    <label for="policy_name">ì •ì±…ëª… *</label>
                    <input type="text" id="policy_name" name="policy_name" placeholder="ì˜ˆ: í”„ë¦¬ë¯¸ì—„ ì •ì±…" required>
                </div>
                <div class="form-group">
                    <label for="policy_data">ì •ì±… ë°ì´í„° (JSON) *</label>
                    <textarea id="policy_data" name="policy_data" rows="10" placeholder='{"feature": "enabled"}' style="font-family: monospace;" required></textarea>
                    <small style="color: #6b7280;">ìœ íš¨í•œ JSON í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.</small>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn grey darken-1 modal-close">ì·¨ì†Œ</button>
                    <button type="submit" class="btn blue">ìƒì„±</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ì •ì±… ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="edit-policy-modal" class="modal studio-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>âœï¸ ì •ì±… ìˆ˜ì •</h3>
                <button class="modal-close" aria-label="ë‹«ê¸°" title="ë‹«ê¸°">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <form id="edit-policy-form">
                <input type="hidden" id="edit_policy_id" name="policy_id">
                <div class="form-group">
                    <label for="edit_policy_name">ì •ì±…ëª… *</label>
                    <input type="text" id="edit_policy_name" name="policy_name" required>
                </div>
                <div class="form-group">
                    <label for="edit_policy_data">ì •ì±… ë°ì´í„° (JSON) *</label>
                    <textarea id="edit_policy_data" name="policy_data" rows="12" style="font-family: monospace;" required></textarea>
                    <small style="color: #6b7280;">ìœ íš¨í•œ JSON í˜•ì‹ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.</small>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn grey darken-1 modal-close">ì·¨ì†Œ</button>
                    <button type="submit" class="btn blue">ì €ì¥</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Materialize JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script type="module" src="./js/main.js"></script>

    <!-- ê¸€ë¡œë²Œ ë¡œë”© ì˜¤ë²„ë ˆì´ -->
    <div id="global-loading" class="loading-overlay" style="display:none;">
        <div class="loading-content">
            <div class="spinner"></div>
            <div class="loading-text">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
        </div>
    </div>
</body>
</html>
